<!DOCTYPE html>
<html lang="en">

<head>

    <title>CinemaPeedika</title>

    <link rel="stylesheet" href="assets/CSS/styles.css">

    <!--==================== ICONS ====================-->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

    <!-- ======================= FAVICON ================ -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/images/favicon/site.webmanifest">

</head>

<body>
    <!-- ============= HEADER ============ -->
    <header>
        <div class="navbar">
            <div class="logo">
                <a href="index.html">
                    <img src="assets/images/Cinema Peedika Logo (1).png" alt="Cinema Peedika Logo">
                </a>
            </div>

            <div class="nav-items">
                <ul class="nav-links">
                    <li><a href="index.html">Movies</a></li>
                    <li><a href="news.html">News</a></li>
                    <li><a href="booktickets.html">Book Tickets</a></li>
                    <li><input class="search" type="text" placeholder="Search"></li>
                    <li>
                        <a href="signin.html"><button class="signup-button homepage-signin-btn" type="submit"
                                id="signin-button">New User?</button>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </header>

    <main class="site-content">

        <!-- ============= BACK TO TOP BUTTON ============= -->
        <button id="backToTopButton"><img src="assets/images/up-arrow.png" alt=""><span>Back to top</span></button>


        <!-- ================== Movie Details Section ==================== -->
        <div class="background">
            <div class="movie-detail-container1">
                <!-- ========== Movie Title and Rating   ========== -->
                <div class="flex jc-sp-b">
                    <div>
                        <h1 class="movie-name"></h1>
                        <h5 class="subtitle">2023 â€¢ 2h 52min</h5>
                    </div>
                    <div class="flex ratings ">
                        <div class="imdb-rating">
                            <p class="subtitle">IMDb RATING</p>


                            <div class="i-t-center flex jc-sp-b">
                                <div>
                                    <iconify-icon icon="material-symbols:star" style="color: red; "
                                        width="35"></iconify-icon>
                                </div>
                                <div>
                                    <p><b class="font22 movie-rating">8.5</b> /10</p>
                                    <p class="subtitle font14">28k</p>
                                </div>

                            </div>

                        </div>
                        <div class="ur-rating ">
                            <p class="subtitle">YOUR RATING</p>

                            <div class="i-t-center flex" style="color: blue;">

                                <div>
                                    <iconify-icon icon="material-symbols:star-outline" style="color: blue;"
                                        width="35"></iconify-icon>
                                </div>
                                <div>
                                    <p><b class="font20">Rate</b></p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- ========== Movie Title and Rating Ends here  ========== -->

                <!-- =========== Movie Poster and Trailer -->
                <div class="flex jc-sp-b p-t-10">
                    <div class="movie-poster">
                        <img class="movies-poster" src="assets/images/movies/posters/jigarthanda.jpg" alt="Poster">
                    </div>
                    <div class="movie-trailer">
                        <video class="movies-trailer" src="assets/Trailers/Jigarthanda.mp4" autoplay muted
                            controls></video>
                    </div>
                </div>

                <!-- ========== Description Section  -->
                <div class="flex jc-sp-b m-t-10 ">

                    <!-- ========== Details ===========-->
                    <div>
                        <section style=" width: 660.26px; height: auto;">
                            <div style="width: 300.46px; height: 37.14px;">
                                <button class="transparent-button" id="genre1">Action</button>
                                <button class="transparent-button" id="genre2">Comedy</button>
                                <button class="transparent-button" id="genre3">Drama</button>
                            </div>
                            <div class="movie-description">
                                <p class="short-description"></p>
                                <hr class="divider">
                                <div class="flex">
                                    <h4>Director</h4>
                                    <span class="blue-color m-l-30 f-w-700 director"></span>
                                </div>
                                <hr class="divider">
                                <div class="flex">
                                    <h4>Writers</h4>
                                    <span class="blue-color m-l-30 f-w-700 writer"></span>
                                </div>
                                <hr class="divider">
                                <div class="flex">
                                    <h4>Stars</h4>
                                    <span class="blue-color m-l-30 f-w-700" id="starsSection"></span>
                                </div>
                                <hr class="divider">
                                <div class="flex al-center">
                                    <a href="https://en.wikipedia.org/wiki/Jigarthanda_DoubleX#Production"
                                        target="_blank">
                                        See production, box office & company info
                                        <iconify-icon icon="icon-park-outline:share" style="color: white;"
                                            width="15"></iconify-icon>
                                    </a>

                                </div>
                            </div>
                        </section>
                    </div>
                    <!-- ============ See Shows button -->
                    <!-- <div class="m-l-30" style="background-color: blue; width: 300.63px; height: auto;"></div> -->
                </div>
            </div>
        </div>


        <div class="movie-detail-container2">
            <!-- ================== Storyline Section ==================== -->

            <div class="storyline-container">
                <h2>Storyline</h2>
                <p class="movie-storyline"></p>
                <p class="movie-storyline"></p>
                <p class="movie-storyline"></p>
                <p class="movie-storyline"></p>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <!-- <footer class="site-footer">
        <div class="footer-content">
            <p>&copy; 2023 CinemaPeedika. All Rights Reserved.</p>
            <div class="footer-links">
                <ul>
                    <li><a href="#">Movies</a></li>
                    <li><a href="news.html">News</a></li>
                    <li><a href="booktickets.html">Book Tickets</a></li>
                </ul>
            </div>
            <div class="developer-info">
                <a href="https://github.com/safadtm" target="_blank">
                    <p>Developed by Safad TM</p>
                    <img src="assets/images/icons/github-mark-white.png">
                </a>
            </div>
        </div>
    </footer> -->


    <!-- Javascript script tag -->
    <script src="assets/js/script.js"></script>
    <script>
        function getUrlParameter(name) {
            name = name.replace(/[[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        const movieId = parseInt(getUrlParameter('id'));



        function fetchAndPopulateMovieDetails() {
            fetch('assets/JSON/movies.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok')
                    }
                    return response.json();
                })
                .then(moviesData => {
                    console.log(movieId);
                    const selectedMovie = moviesData.find(movies => movies.id === movieId);

                    if (selectedMovie) {
                        document.querySelector('.movie-name').textContent = selectedMovie.movieName;
                        document.querySelector('.movies-trailer').src = selectedMovie.trailer;
                        document.querySelector('.movies-poster').src = selectedMovie.poster;
                        document.querySelector('.short-description').textContent = selectedMovie.shortDescription;
                        document.querySelector('.director').textContent = selectedMovie.director;
                        document.querySelectorAll('.movie-storyline')[0].textContent = selectedMovie.p1;
                        document.querySelectorAll('.movie-storyline')[1].textContent = selectedMovie.p2;
                        document.querySelectorAll('.movie-storyline')[2].textContent = selectedMovie.p3;
                        document.querySelectorAll('.movie-storyline')[3].textContent = selectedMovie.p4;

                        const starsSection = document.getElementById('starsSection');
                        selectedMovie.stars.forEach((star, index) => {
                            // Create a span element for each star
                            const starSpan = document.createElement('span');
                            starSpan.textContent = star;

                            // Add a bullet point separator if it's not the last star
                            if (index !== selectedMovie.stars.length - 1) {
                                const bulletSpan = document.createElement('span');
                                bulletSpan.classList.add('bullet-point');
                                bulletSpan.textContent = 'â€¢';

                                starsSection.appendChild(starSpan);
                                starsSection.appendChild(bulletSpan);
                            } else {
                                starsSection.appendChild(starSpan);
                            }
                        });
                    } else {
                        console.error('Movies ID not found or invalid');
                    }

                })
        }
        fetchAndPopulateMovieDetails();

    </script>
</body>

</html>